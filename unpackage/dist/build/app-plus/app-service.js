if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";const n=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},o=n({__name:"tab-control",props:{titles:{type:Array,default:()=>[]}},emits:["tab-item-click"],setup(t,{emit:n}){const o=e.ref(0);return(i,r)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-control"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.titles,((t,i)=>(e.openBlock(),e.createElementBlock("view",{key:i,class:"tab-item",onClick:e=>(e=>{o.value=e,n("tab-item-click",e)})(i)},[e.createElementVNode("text",{class:e.normalizeClass(["title",{active:i===o.value}])},e.toDisplayString(t),3)],8,["onClick"])))),128))]))}},[["__scopeId","data-v-439d6396"]]);function i(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}function r(e,n){return t.isString(e)?n:e}const a=t=>(n,o=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,n,o)},s=a("onLoad"),c=a("onReachBottom"),l=n({__name:"grid-view-item",props:{goodsInfo:{type:Object,default:()=>{}}},setup:t=>(n,o)=>(e.openBlock(),e.createElementBlock("view",{class:"goods-item"},[e.createElementVNode("image",{class:"image","lazy-load":!0,src:t.goodsInfo.show.img,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"desc-info"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.goodsInfo.title),1),e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"price"},"￥"+e.toDisplayString(t.goodsInfo.price),1),e.createElementVNode("image",{class:"cfav-img",src:"/static/images/common/favor.png",mode:"widthFix"}),e.createElementVNode("text",{class:"cfav"},e.toDisplayString(t.goodsInfo.cfav),1)])])]))},[["__scopeId","data-v-631b29c6"]]);const u=n({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(t,n,o,i,r,a){return r.width?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle("width:"+r.width+";"+(r.square?"height:"+r.width:"")),class:"uni-grid-item"},[e.createElementVNode("view",{class:e.normalizeClass([{"uni-grid-item--border":r.showBorder,"uni-grid-item--border-top":r.showBorder&&o.index<r.column,"uni-highlight":r.highlight},"uni-grid-item__box"]),style:e.normalizeStyle({"border-right-color":r.borderColor,"border-bottom-color":r.borderColor,"border-top-color":r.borderColor}),onClick:n[0]||(n[0]=(...e)=>a._onClick&&a._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-2511947d"]]);const d=n({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,n)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}},[["render",function(t,n,o,i,r,a){return e.openBlock(),e.createElementBlock("view",{class:"uni-grid-wrap"},[e.createElementVNode("view",{id:r.elId,ref:"uni-grid",class:e.normalizeClass(["uni-grid",{"uni-grid--border":o.showBorder}]),style:e.normalizeStyle({"border-left-color":o.borderColor})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],14,["id"])])}],["__scopeId","data-v-a6acbddc"]]),p=n({__name:"home-banner",props:{banners:{type:Array,default:()=>[]}},emits:["bannerClick"],setup:(t,{emit:n})=>(o,i)=>(e.openBlock(),e.createElementBlock("swiper",{class:"banner","indicator-color":"pink","indicator-dots":!0,autoplay:!0,interval:3e3,duration:1e3},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.banners,((t,o)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:o,onClick:e=>{return o=t.link,void n("bannerClick",o);var o}},[e.createElementVNode("image",{class:"image",src:t.image,mode:"widthFix"},null,8,["src"])],8,["onClick"])))),128))]))},[["__scopeId","data-v-cae12202"]]),h=n({__name:"home-recommend",props:{recommends:{type:Array,default:()=>[]}},emits:["recommend-item-click"],setup:(t,{emit:n})=>(o,i)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend-wrapper"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.recommends,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"recommend-item",onClick:e=>{return o=t.link,void n("recommend-item-click",o);var o}},[e.createElementVNode("image",{class:"image",src:t.image,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1)],8,["onClick"])))),128))]))},[["__scopeId","data-v-feaf85be"]]);const m=n({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("view",{class:"popular"},[e.createElementVNode("image",{class:"image",src:"/static/recommend_bg.jpg",mode:"widthFix"})])}],["__scopeId","data-v-d01d01af"]]);
/*!
    * pinia v2.0.32
    * (c) 2023 Eduardo San Martin Morote
    * @license MIT
    */
let f;const g=e=>f=e,y=Symbol();function v(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var w,_;(_=w||(w={})).direct="direct",_.patchObject="patch object",_.patchFunction="patch function";const b="undefined"!=typeof window;function k(){const t=e.effectScope(!0),n=t.run((()=>e.ref({})));let o=[],i=[];const r=e.markRaw({install(e){g(r),r._a=e,e.provide(y,r),e.config.globalProperties.$pinia=r,i.forEach((e=>o.push(e))),i=[]},use(e){return this._a?o.push(e):i.push(e),this},_p:o,_a:null,_e:t,_s:new Map,state:n});return r}const B=()=>{};function S(t,n,o,i=B){t.push(n);const r=()=>{const e=t.indexOf(n);e>-1&&(t.splice(e,1),i())};return!o&&e.getCurrentScope()&&e.onScopeDispose(r),r}function A(e,...t){e.slice().forEach((e=>{e(...t)}))}function E(t,n){t instanceof Map&&n instanceof Map&&n.forEach(((e,n)=>t.set(n,e))),t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const i=n[o],r=t[o];v(r)&&v(i)&&t.hasOwnProperty(o)&&!e.isRef(i)&&!e.isReactive(i)?t[o]=E(r,i):t[o]=i}return t}const C=Symbol();const{assign:I}=Object;function $(t,n,o={},i,r,a){let s;const c=I({actions:{}},o),l={deep:!0};let u,d,p,h=e.markRaw([]),m=e.markRaw([]);const f=i.state.value[t];let y;function _(n){let o;u=d=!1,"function"==typeof n?(n(i.state.value[t]),o={type:w.patchFunction,storeId:t,events:p}):(E(i.state.value[t],n),o={type:w.patchObject,payload:n,storeId:t,events:p});const r=y=Symbol();e.nextTick().then((()=>{y===r&&(u=!0)})),d=!0,A(h,o,i.state.value[t])}a||f||(i.state.value[t]={}),e.ref({});const b=B;function k(e,n){return function(){g(i);const o=Array.from(arguments),r=[],a=[];function s(e){r.push(e)}function c(e){a.push(e)}let l;A(m,{args:o,name:e,store:P,after:s,onError:c});try{l=n.apply(this&&this.$id===t?this:P,o)}catch(u){throw A(a,u),u}return l instanceof Promise?l.then((e=>(A(r,e),e))).catch((e=>(A(a,e),Promise.reject(e)))):(A(r,l),l)}}const $={_p:i,$id:t,$onAction:S.bind(null,m),$patch:_,$reset:b,$subscribe(n,o={}){const r=S(h,n,o.detached,(()=>a())),a=s.run((()=>e.watch((()=>i.state.value[t]),(e=>{("sync"===o.flush?d:u)&&n({storeId:t,type:w.direct,events:p},e)}),I({},l,o))));return r},$dispose:function(){s.stop(),h=[],m=[],i._s.delete(t)}},P=e.reactive($);i._s.set(t,P);const V=i._e.run((()=>(s=e.effectScope(),s.run((()=>n())))));for(const g in V){const n=V[g];if(e.isRef(n)&&(x=n,!e.isRef(x)||!x.effect)||e.isReactive(n))a||(!f||v(j=n)&&j.hasOwnProperty(C)||(e.isRef(n)?n.value=f[g]:E(n,f[g])),i.state.value[t][g]=n);else if("function"==typeof n){const e=k(g,n);V[g]=e,c.actions[g]=n}}var j,x;return I(P,V),I(e.toRaw(P),V),Object.defineProperty(P,"$state",{get:()=>i.state.value[t],set:e=>{_((t=>{I(t,e)}))}}),i._p.forEach((e=>{I(P,s.run((()=>e({store:P,app:i._a,pinia:i,options:c}))))})),f&&a&&o.hydrate&&o.hydrate(P.$state,f),u=!0,d=!0,P}function P(t,n,o){let i,r;const a="function"==typeof n;function s(t,o){const s=e.getCurrentInstance();(t=t||s&&e.inject(y,null))&&g(t),(t=f)._s.has(i)||(a?$(i,n,r,t):function(t,n,o,i){const{state:r,actions:a,getters:s}=n,c=o.state.value[t];let l;l=$(t,(function(){c||(o.state.value[t]=r?r():{});const n=e.toRefs(o.state.value[t]);return I(n,a,Object.keys(s||{}).reduce(((n,i)=>(n[i]=e.markRaw(e.computed((()=>{g(o);const e=o._s.get(t);return s[i].call(e,e)}))),n)),{}))}),n,o,0,!0),l.$reset=function(){const e=r?r():{};this.$patch((t=>{I(t,e)}))}}(i,r,t));return t._s.get(i)}return"string"==typeof t?(i=t,r=a?o:n):(r=t,i=t.id),s.$id=i,s}let V="Store";function j(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]=function(){return e(this.$pinia)[n]},t)),{}):Object.keys(t).reduce(((n,o)=>(n[o]=function(){const n=e(this.$pinia),i=t[o];return"function"==typeof i?i.call(this,n):n[i]},n)),{})}const x=j;function N(t){{t=e.toRaw(t);const n={};for(const o in t){const i=t[o];(e.isRef(i)||e.isReactive(i))&&(n[o]=e.toRef(t,o))}return n}}const O=Object.freeze(Object.defineProperty({__proto__:null,get MutationType(){return w},PiniaVuePlugin:function(e){e.mixin({beforeCreate(){const e=this.$options;if(e.pinia){const t=e.pinia;if(!this._provided){const e={};Object.defineProperty(this,"_provided",{get:()=>e,set:t=>Object.assign(e,t)})}this._provided[y]=t,this.$pinia||(this.$pinia=t),t._a=this,b&&g(t)}else!this.$pinia&&e.parent&&e.parent.$pinia&&(this.$pinia=e.parent.$pinia)},destroyed(){delete this._pStores}})},acceptHMRUpdate:function(e,t){return()=>{}},createPinia:k,defineStore:P,getActivePinia:()=>e.getCurrentInstance()&&e.inject(y)||f,mapActions:function(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]=function(...t){return e(this.$pinia)[n](...t)},t)),{}):Object.keys(t).reduce(((n,o)=>(n[o]=function(...n){return e(this.$pinia)[t[o]](...n)},n)),{})},mapGetters:x,mapState:j,mapStores:function(...e){return e.reduce(((e,t)=>(e[t.$id+V]=function(){return t(this.$pinia)},e)),{})},mapWritableState:function(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]={get(){return e(this.$pinia)[n]},set(t){return e(this.$pinia)[n]=t}},t)),{}):Object.keys(t).reduce(((n,o)=>(n[o]={get(){return e(this.$pinia)[t[o]]},set(n){return e(this.$pinia)[t[o]]=n}},n)),{})},setActivePinia:g,setMapStoreSuffix:function(e){V=e},skipHydrate:function(e){return Object.defineProperty(e,C,{})},storeToRefs:N},Symbol.toStringTag,{value:"Module"}));const R=new class{request(e,t,n){return new Promise(((o,i)=>{uni.request({url:"http://192.168.0.104:3007"+e,timeout:1e4,method:t,data:n,success:e=>{o(e.data)},fail:e=>{throw e}})}))}get(e,t){return this.request(e,"GET",t)}post(e,t){return this.request(e,"POST",t)}};const D=["pop","new","sell"];function F(){let e={};return D.forEach((t=>{e[t]={page:0,list:[]}})),e}const T=P("home",{state:()=>({banners:[],recommends:[],goodsList:F()}),getters:{},actions:{async fetchHomeMultiData(){const e=await R.get("/home/multidata");this.banners=e.data.banner.list,this.recommends=e.data.recommend.list},async fetchHomeData(e,t){const n=await function(e,t){return R.get("/home/data",{type:e,page:t})}(e,t);this.goodsList[e].list.push(...n.data.list),this.goodsList[e].page=t}}}),U={__name:"home",setup(t){const n=T(),{banners:i,recommends:a,goodsList:f}=N(n),g=e.ref(0);s((()=>{n.fetchHomeMultiData(),n.fetchHomeData("pop",1),n.fetchHomeData("new",1),n.fetchHomeData("sell",1)})),c((()=>{n.fetchHomeData(D[g.value],f.value[[D[g.value]]].page+1)}));const y=e=>{uni.navigateTo({url:"/pages/webview/webview?link="+e})},v=e=>{uni.navigateTo({url:"/pages/webview/webview?link="+e})},w=e=>{g.value=e};return(t,n)=>{const s=r(e.resolveDynamicComponent("tab-control"),o),c=r(e.resolveDynamicComponent("grid-view-item"),l),_=r(e.resolveDynamicComponent("uni-grid-item"),u),b=r(e.resolveDynamicComponent("uni-grid"),d);return e.openBlock(),e.createElementBlock("view",{class:"home"},[e.createVNode(p,{banners:e.unref(i),onBannerClick:y},null,8,["banners"]),e.createVNode(h,{recommends:e.unref(a),onRecommendItemClick:v},null,8,["recommends"]),e.createVNode(m),e.createVNode(s,{titles:["流行","新款","精选"],onTabItemClick:w}),e.createVNode(b,{column:2,square:!1,"show-border":!1,highlight:!1},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f)[e.unref(D)[g.value]].list,((t,n)=>(e.openBlock(),e.createBlock(_,{key:t.iid},{default:e.withCtx((()=>[e.createVNode(c,{"goods-info":t},null,8,["goods-info"])])),_:2},1024)))),128))])),_:1})])}}};const q=n({data:()=>({})},[["render",function(t,n,o,i,r,a){return e.openBlock(),e.createElementBlock("view")}]]);const H=n({data:()=>({})},[["render",function(t,n,o,i,r,a){return e.openBlock(),e.createElementBlock("view")}]]);const L=n({data:()=>({}),methods:{}},[["render",function(t,n,o,i,r,a){return e.openBlock(),e.createElementBlock("view")}]]);const M=n({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("view")}]]),z={__name:"webview",props:{link:{type:String,default:""}},setup:t=>(n,o)=>(e.openBlock(),e.createElementBlock("web-view",{src:t.link},null,8,["src"]))};__definePage("pages/home/home",U),__definePage("pages/category/category",q),__definePage("pages/cart/cart",H),__definePage("pages/profile/profile",L),__definePage("pages/detail/detail",M),__definePage("pages/webview/webview",z);const G={onLaunch:function(){i("log","at App.vue:4","App Launch")},onShow:function(){i("log","at App.vue:7","App Show")},onHide:function(){i("log","at App.vue:10","App Hide")}};const{app:J,Vuex:Q,Pinia:W}=function(){const t=e.createVueApp(G);return t.use(k()),{app:t,Pinia:O}}();uni.Vuex=Q,uni.Pinia=W,J.provide("__globalStyles",__uniConfig.styles),J._component.mpType="app",J._component.render=()=>{},J.mount("#app")}(Vue,uni.VueShared);
